# ====================================================================
# REQUIREMENTS V2 - ACTUALIZADO - Entorno completamente funcional
# ====================================================================
# Python 3.10 + PyTorch 2.0.1 + Mamba-SSM + CUDA Toolkit
# ✅ WARNING nvrtc.so SOLUCIONADO
# Generado: Agosto 2025

# ====================================================================
# CORE MACHINE LEARNING STACK
# ====================================================================

# PyTorch con CUDA 11.8 (exacto)
torch==2.0.1+cu118
torchvision==0.15.2+cu118
triton==2.0.0

# Scientific Computing
numpy==1.26.4
scipy==1.15.3
pandas==2.3.1
scikit-learn==1.7.1

# ====================================================================
# COMPUTER VISION & MEDICAL IMAGING
# ====================================================================

opencv-python==4.9.0.80
Pillow==11.0.0
nibabel==5.3.2

# ====================================================================
# VISUALIZATION
# ====================================================================

matplotlib==3.10.5
contourpy==1.3.2
cycler==0.12.1
fonttools==4.59.0
kiwisolver==1.4.8

# ====================================================================
# TRANSFORMERS (Compatible con PyTorch 2.0.1)
# ====================================================================

transformers==4.34.0
tokenizers==0.14.1
huggingface-hub==0.17.3
safetensors==0.5.3
regex==2025.7.34

# ====================================================================
# MAMBA-SSM DEPENDENCIES
# ====================================================================

einops==0.8.1

# ====================================================================
# UTILITIES
# ====================================================================

tqdm==4.67.1
psutil==7.0.0
PyYAML==6.0.2
packaging==25.0

# Build tools
ninja==1.11.1.4
cmake==3.25.0

# Network
requests==2.32.4
urllib3==1.26.13
certifi==2022.12.7
charset-normalizer==2.1.1
idna==3.4
fsspec==2025.7.0

# ====================================================================
# JUPYTER & DEVELOPMENT
# ====================================================================

jupyter==1.1.1
jupyterlab==4.4.5
ipython==8.37.0
ipykernel==6.30.1
notebook==7.4.8

# ====================================================================
# INSTALACIÓN COMPLETA
# ====================================================================

# 1. SISTEMA BASE (Ubuntu/WSL):
# sudo apt update
# sudo apt install python3.10 python3.10-venv python3.10-dev

# 2. CUDA TOOLKIT (elimina warning nvrtc.so):
# sudo apt install nvidia-cuda-toolkit

# 3. ENTORNO VIRTUAL:
# python3.10 -m venv .venv
# source .venv/bin/activate

# 4. DEPENDENCIAS PRINCIPALES:
# pip install -r requirements_v2_updated.txt

# 5. MAMBA-SSM (desde wheels locales):
# pip install wheels/Normal/mamba_ssm-1.2.0.post1+cu118torch2.0cxx11abiFALSE-cp310-cp310-linux_x86_64.whl
# pip install wheels/Normal/causal_conv1d-1.3.0.post1+cu118torch1.12cxx11abiFALSE-cp310-cp310-linux_x86_64.whl

# ====================================================================
# VERIFICACIÓN
# ====================================================================

# python -c "import torch; import mamba_ssm; print('✅ PyTorch:', torch.__version__); print('✅ CUDA:', torch.cuda.is_available()); print('✅ mamba-ssm OK')"

# ====================================================================
# CONFIGURACIÓN FUNCIONAL CONFIRMADA
# ====================================================================

# ✅ Python: 3.10.18
# ✅ PyTorch: 2.0.1+cu118  
# ✅ CUDA: 11.8 + RTX 3060
# ✅ mamba-ssm: 1.2.0 (oficial)
# ✅ nvrtc.so: Disponible (sin warnings)
# ✅ Dataset: Decathlon compatible
# ✅ Pipeline: test_complete_pipeline.py funcional
